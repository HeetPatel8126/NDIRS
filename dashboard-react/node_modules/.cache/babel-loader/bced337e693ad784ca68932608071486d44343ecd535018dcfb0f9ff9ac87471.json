{"ast":null,"code":"import React,{useState,useEffect,useCallback}from'react';import Header from'./components/Header';import StatsGrid from'./components/StatsGrid';import ProtocolChart from'./components/ProtocolChart';import TrafficChart from'./components/TrafficChart';import AlertsPanel from'./components/AlertsPanel';import TopSourcesChart from'./components/TopSourcesChart';import'./App.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const API_BASE='http://127.0.0.1:8000';function App(){const[isConnected,setIsConnected]=useState(false);const[stats,setStats]=useState({total_packets:0,protocols:{}});const[alerts,setAlerts]=useState([]);const[trafficHistory,setTrafficHistory]=useState([]);const[lastUpdate,setLastUpdate]=useState(null);const fetchStats=useCallback(async()=>{try{const response=await fetch(\"\".concat(API_BASE,\"/stats\"));const data=await response.json();setStats(data);setIsConnected(true);// Update traffic history for time-series chart\nsetTrafficHistory(prev=>{const now=new Date();const newEntry={time:now.toLocaleTimeString(),packets:data.total_packets};const updated=[...prev,newEntry].slice(-20);// Keep last 20 entries\nreturn updated;});setLastUpdate(new Date());}catch(error){setIsConnected(false);console.error('Failed to fetch stats:',error);}},[]);const fetchAlerts=useCallback(async()=>{try{const response=await fetch(\"\".concat(API_BASE,\"/alerts\"));const data=await response.json();setAlerts(data);}catch(error){console.error('Failed to fetch alerts:',error);}},[]);useEffect(()=>{// Initial fetch\nfetchStats();fetchAlerts();// Set up polling interval\nconst interval=setInterval(()=>{fetchStats();fetchAlerts();},2000);return()=>clearInterval(interval);},[fetchStats,fetchAlerts]);const protocolCount=Object.keys(stats.protocols).length;return/*#__PURE__*/_jsxs(\"div\",{className:\"app\",children:[/*#__PURE__*/_jsx(Header,{isConnected:isConnected}),/*#__PURE__*/_jsxs(\"main\",{className:\"container\",children:[/*#__PURE__*/_jsx(StatsGrid,{totalPackets:stats.total_packets,protocolCount:protocolCount,alertCount:alerts.length}),/*#__PURE__*/_jsxs(\"div\",{className:\"charts-grid\",children:[/*#__PURE__*/_jsx(ProtocolChart,{protocols:stats.protocols}),/*#__PURE__*/_jsx(TrafficChart,{trafficHistory:trafficHistory})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"main-grid\",children:[/*#__PURE__*/_jsx(TopSourcesChart,{alerts:alerts}),/*#__PURE__*/_jsx(AlertsPanel,{alerts:alerts})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"refresh-info\",children:[\"Auto-refreshing every 2 seconds | Last update: \",lastUpdate?lastUpdate.toLocaleTimeString():'-']})]})]});}export default App;","map":{"version":3,"names":["React","useState","useEffect","useCallback","Header","StatsGrid","ProtocolChart","TrafficChart","AlertsPanel","TopSourcesChart","jsx","_jsx","jsxs","_jsxs","API_BASE","App","isConnected","setIsConnected","stats","setStats","total_packets","protocols","alerts","setAlerts","trafficHistory","setTrafficHistory","lastUpdate","setLastUpdate","fetchStats","response","fetch","concat","data","json","prev","now","Date","newEntry","time","toLocaleTimeString","packets","updated","slice","error","console","fetchAlerts","interval","setInterval","clearInterval","protocolCount","Object","keys","length","className","children","totalPackets","alertCount"],"sources":["C:/Users/Victus/OneDrive/Desktop/NIDRS/dashboard-react/src/App.js"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\r\nimport Header from './components/Header';\r\nimport StatsGrid from './components/StatsGrid';\r\nimport ProtocolChart from './components/ProtocolChart';\r\nimport TrafficChart from './components/TrafficChart';\r\nimport AlertsPanel from './components/AlertsPanel';\r\nimport TopSourcesChart from './components/TopSourcesChart';\r\nimport './App.css';\r\n\r\nconst API_BASE = 'http://127.0.0.1:8000';\r\n\r\nfunction App() {\r\n  const [isConnected, setIsConnected] = useState(false);\r\n  const [stats, setStats] = useState({\r\n    total_packets: 0,\r\n    protocols: {},\r\n  });\r\n  const [alerts, setAlerts] = useState([]);\r\n  const [trafficHistory, setTrafficHistory] = useState([]);\r\n  const [lastUpdate, setLastUpdate] = useState(null);\r\n\r\n  const fetchStats = useCallback(async () => {\r\n    try {\r\n      const response = await fetch(`${API_BASE}/stats`);\r\n      const data = await response.json();\r\n      setStats(data);\r\n      setIsConnected(true);\r\n      \r\n      // Update traffic history for time-series chart\r\n      setTrafficHistory(prev => {\r\n        const now = new Date();\r\n        const newEntry = {\r\n          time: now.toLocaleTimeString(),\r\n          packets: data.total_packets,\r\n        };\r\n        const updated = [...prev, newEntry].slice(-20); // Keep last 20 entries\r\n        return updated;\r\n      });\r\n      \r\n      setLastUpdate(new Date());\r\n    } catch (error) {\r\n      setIsConnected(false);\r\n      console.error('Failed to fetch stats:', error);\r\n    }\r\n  }, []);\r\n\r\n  const fetchAlerts = useCallback(async () => {\r\n    try {\r\n      const response = await fetch(`${API_BASE}/alerts`);\r\n      const data = await response.json();\r\n      setAlerts(data);\r\n    } catch (error) {\r\n      console.error('Failed to fetch alerts:', error);\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    // Initial fetch\r\n    fetchStats();\r\n    fetchAlerts();\r\n\r\n    // Set up polling interval\r\n    const interval = setInterval(() => {\r\n      fetchStats();\r\n      fetchAlerts();\r\n    }, 2000);\r\n\r\n    return () => clearInterval(interval);\r\n  }, [fetchStats, fetchAlerts]);\r\n\r\n  const protocolCount = Object.keys(stats.protocols).length;\r\n\r\n  return (\r\n    <div className=\"app\">\r\n      <Header isConnected={isConnected} />\r\n      \r\n      <main className=\"container\">\r\n        <StatsGrid \r\n          totalPackets={stats.total_packets}\r\n          protocolCount={protocolCount}\r\n          alertCount={alerts.length}\r\n        />\r\n\r\n        <div className=\"charts-grid\">\r\n          <ProtocolChart protocols={stats.protocols} />\r\n          <TrafficChart trafficHistory={trafficHistory} />\r\n        </div>\r\n\r\n        <div className=\"main-grid\">\r\n          <TopSourcesChart alerts={alerts} />\r\n          <AlertsPanel alerts={alerts} />\r\n        </div>\r\n\r\n        <div className=\"refresh-info\">\r\n          Auto-refreshing every 2 seconds | Last update: {lastUpdate ? lastUpdate.toLocaleTimeString() : '-'}\r\n        </div>\r\n      </main>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}